<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.demo.mapper.local.ManagerMapperExt">

  <select id="queryManagerInfo" resultType="com.example.demo.dto.ManagerRespDto">
    SELECT
    a.id,
    a.name,
    a.sex,
    a.address,
    a.age,
    a.company,
    a.postcode,
    a.birth
    FROM
    manager a
    WHERE 1=1
    <if test="name!=null and name!=''">
      AND a.name like "%"#{name}"%"
    </if>
    <if test="sex!=null and sex!=''">
      AND a.sex = #{sex}
    </if>
    LIMIT #{pageNo},#{pageSize}

  </select>

  <select id="queryTotal" resultType="int">
    SELECT
    count(1)
    FROM
    manager a
    WHERE 1=1
    <if test="name!=null and name!=''">
    AND a.name like "%"#{name}"%"
    </if>
    <if test="sex!=null and sex!=''">
      AND a.sex = #{sex}
    </if>

  </select>
</mapper>